<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Procurement Test Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Inter", sans-serif;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --text-tertiary: #9ca3af;
            --border-color: #e5e7eb;
            --border-color-dark: #d1d5db;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 8px 20px rgba(0, 0, 0, 0.12);
            --blue-500: #3b82f6;
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            --green-500: #22c55e;
            --green-600: #16a34a;
            --red-500: #ef4444;
            --red-600: #dc2626;
            --yellow-500: #eab308;
            --yellow-600: #ca8a04;
            --amber-500: #f59e0b;
        }

        body.dark {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
            --border-color: #374151;
            --border-color-dark: #4b5563;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.7);
            --shadow-hover: 0 8px 20px rgba(0, 0, 0, 0.5);
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading-spinner {
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top: 3px solid var(--blue-600);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .metric-card {
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .scrollbar-custom::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        .scrollbar-custom::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        body.dark .scrollbar-custom::-webkit-scrollbar-track {
            background: #374151;
        }

        .scrollbar-custom::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        body.dark .scrollbar-custom::-webkit-scrollbar-thumb {
            background: #6b7280;
        }

        .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        body.dark .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        .test-card {
            transition: all 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .expand-btn {
            transition: transform 0.3s ease;
        }

        .expand-btn.expanded {
            transform: rotate(180deg);
        }

        .status-pill {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-passed {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-failed {
            background-color: #fee2e2;
            color: #991b1b;
        }

        body.dark .status-passed {
            background-color: #064e3b;
            color: #86efac;
        }

        body.dark .status-failed {
            background-color: #7f1d1d;
            color: #fca5a5;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
        }

        body.dark .progress-bar {
            background-color: #374151;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #06b6d4);
            transition: width 0.5s ease;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header */
        header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s ease;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-icon {
            font-size: 1.875rem;
            color: var(--blue-600);
        }

        body.dark .header-icon {
            color: var(--blue-500);
        }

        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .header-title p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        body.dark .btn-secondary {
            background-color: var(--bg-tertiary);
        }

        body.dark .btn-secondary:hover {
            background-color: #4b5563;
        }

        .btn-icon {
            padding: 0.75rem;
        }

        .btn-icon i {
            font-size: 1.25rem;
        }

        .dark-icon {
            display: none;
        }

        body.dark .light-icon {
            display: none;
        }

        body.dark .dark-icon {
            display: inline;
        }

        /* Loading State */
        .loading-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .loading-content {
            text-align: center;
        }

        .loading-text {
            color: var(--text-secondary);
            margin-top: 1rem;
        }

        /* Main Content */
        main {
            padding: 2rem 0;
        }

        .hidden {
            display: none !important;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background-color: var(--bg-secondary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        .metric-card.blue {
            border-left: 4px solid var(--blue-500);
        }

        .metric-card.green {
            border-left: 4px solid var(--green-500);
        }

        .metric-card.red {
            border-left: 4px solid var(--red-500);
        }

        .metric-card.yellow {
            border-left: 4px solid var(--yellow-500);
        }

        .metric-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .metric-info p:first-child {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.875rem;
            font-weight: 700;
            margin-top: 0.5rem;
        }

        .metric-value.blue {
            color: var(--blue-600);
        }

        body.dark .metric-value.blue {
            color: var(--blue-500);
        }

        .metric-value.green {
            color: var(--green-600);
        }

        body.dark .metric-value.green {
            color: var(--green-500);
        }

        .metric-value.red {
            color: var(--red-600);
        }

        body.dark .metric-value.red {
            color: var(--red-500);
        }

        .metric-value.yellow {
            color: var(--yellow-600);
        }

        body.dark .metric-value.yellow {
            color: var(--yellow-500);
        }

        .metric-icon {
            font-size: 2.5rem;
            opacity: 0.2;
        }

        .metric-icon.blue {
            color: var(--blue-500);
        }

        .metric-icon.green {
            color: var(--green-500);
        }

        .metric-icon.red {
            color: var(--red-500);
        }

        .metric-icon.yellow {
            color: var(--yellow-500);
        }

        /* Critical Issues Section */
        .issues-section {
            background-color: var(--bg-secondary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }

        .issues-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .issues-title i {
            color: var(--red-500);
            margin-right: 0.75rem;
        }

        .issues-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .issue-item {
            display: flex;
            align-items: flex-start;
            padding: 1rem;
            background-color: rgba(239, 68, 68, 0.05);
            border-left: 4px solid var(--red-500);
            border-radius: 0.5rem;
        }

        body.dark .issue-item {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .issue-item i {
            color: var(--red-500);
            margin-right: 0.75rem;
            margin-top: 0.25rem;
            flex-shrink: 0;
        }

        .issue-text {
            color: var(--text-primary);
        }

        body.dark .issue-text {
            color: var(--text-secondary);
        }

        /* Test Results Section */
        .test-results-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }

        .section-title i {
            color: var(--blue-500);
            margin-right: 0.75rem;
        }

        .test-results-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .test-card {
            background-color: var(--bg-secondary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-sm);
        }

        .test-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .test-header-left {
            flex: 1;
        }

        .test-name-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .test-page-name {
            font-size: 1.125rem;
            font-weight: 700;
        }

        .test-file-name {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .expand-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .expand-btn i {
            color: var(--text-secondary);
        }

        .test-metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .metric-item p:first-child {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .metric-item p:last-child {
            font-size: 1.125rem;
            font-weight: 700;
        }

        .metric-item.blue p:last-child {
            color: var(--blue-600);
        }

        body.dark .metric-item.blue p:last-child {
            color: var(--blue-500);
        }

        .metric-item.green p:last-child {
            color: var(--green-600);
        }

        body.dark .metric-item.green p:last-child {
            color: var(--green-500);
        }

        .metric-item.red p:last-child {
            color: var(--red-600);
        }

        body.dark .metric-item.red p:last-child {
            color: var(--red-500);
        }

        .metric-item.yellow p:last-child {
            color: var(--yellow-600);
        }

        body.dark .metric-item.yellow p:last-child {
            color: var(--yellow-500);
        }

        .expand-details {
            border-top: 1px solid var(--border-color);
            padding-top: 1rem;
            margin-top: 1rem;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        @media (min-width: 768px) {
            .details-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .details-section p:first-child {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .endpoints-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .endpoint-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem;
            background-color: var(--bg-tertiary);
            border-radius: 0.375rem;
        }

        body.dark .endpoint-item {
            background-color: var(--bg-tertiary);
        }

        .endpoint-name {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .endpoint-method {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--blue-600);
            border-radius: 0.25rem;
        }

        body.dark .endpoint-method {
            background-color: rgba(59, 130, 246, 0.2);
            color: var(--blue-500);
        }

        .config-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .config-item {
            display: flex;
            justify-content: space-between;
        }

        .config-value {
            font-weight: 600;
        }

        .test-results-box {
            background-color: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        body.dark .test-results-box {
            background-color: var(--bg-tertiary);
        }

        .test-results-box > p:first-child {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .results-items {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .result-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }

        .result-item-name {
            font-size: 0.875rem;
        }

        .result-item-rate {
            font-size: 0.75rem;
            font-weight: 700;
        }

        .issues-summary-box {
            background-color: rgba(245, 158, 11, 0.05);
            border-left: 4px solid var(--amber-500);
            padding: 1rem;
            border-radius: 0.5rem;
        }

        body.dark .issues-summary-box {
            background-color: rgba(245, 158, 11, 0.1);
        }

        .issues-summary-box > p:first-child {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .issues-summary-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .issues-summary-list li {
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        body.dark .issues-summary-list li {
            color: var(--text-secondary);
        }

        /* Recommendation Section */
        .recommendation-section {
            background-color: var(--bg-secondary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        .recommendation-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .recommendation-title i {
            color: var(--amber-500);
            margin-right: 0.75rem;
        }

        .recommendation-text {
            color: var(--text-primary);
            line-height: 1.625;
        }

        body.dark .recommendation-text {
            color: var(--text-secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-right {
                width: 100%;
                justify-content: space-between;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .test-metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <i class="fas fa-flask header-icon"></i>
                    <div class="header-title">
                        <h1>Procurement Test Dashboard</h1>
                        <p>Performance Test Results & Analysis</p>
                    </div>
                </div>
                <div class="header-right">
                    <button id="backBtn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                    </button>
                    <button id="themeToggle" class="btn btn-secondary btn-icon">
                        <i class="fas fa-moon light-icon"></i>
                        <i class="fas fa-sun dark-icon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Loading State -->
    <div id="loading" class="loading-container">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading Test Results...</p>
        </div>
    </div>

    <!-- Main Content -->
    <main id="mainContent" class="hidden">
        <div class="container">
            <!-- Summary Section -->
            <div class="stats-grid">
                <div class="metric-card blue">
                    <div class="metric-content">
                        <div class="metric-info">
                            <p>Total Tests</p>
                            <p id="totalTests" class="metric-value blue">0</p>
                        </div>
                        <i class="fas fa-flask metric-icon blue"></i>
                    </div>
                </div>

                <div class="metric-card green">
                    <div class="metric-content">
                        <div class="metric-info">
                            <p>Passed</p>
                            <p id="passedTests" class="metric-value green">0</p>
                        </div>
                        <i class="fas fa-check-circle metric-icon green"></i>
                    </div>
                </div>

                <div class="metric-card red">
                    <div class="metric-content">
                        <div class="metric-info">
                            <p>Failed</p>
                            <p id="failedTests" class="metric-value red">0</p>
                        </div>
                        <i class="fas fa-times-circle metric-icon red"></i>
                    </div>
                </div>

                <div class="metric-card yellow">
                    <div class="metric-content">
                        <div class="metric-info">
                            <p>Test Date</p>
                            <p id="testDate" class="metric-value yellow">-</p>
                        </div>
                        <i class="fas fa-calendar metric-icon yellow"></i>
                    </div>
                </div>
            </div>

            <!-- Critical Issues -->
            <div class="issues-section">
                <h2 class="issues-title">
                    <i class="fas fa-exclamation-circle"></i>
                    Critical Issues
                </h2>
                <div id="issuesList" class="issues-list">
                    <!-- Issues will be populated here -->
                </div>
            </div>

            <!-- Test Results -->
            <div class="test-results-section">
                <h2 class="section-title">
                    <i class="fas fa-list"></i>
                    Test Results by Page
                </h2>
                <div id="testResultsList" class="test-results-list">
                    <!-- Test cards will be populated here -->
                </div>
            </div>

            <!-- Recommendation Section -->
            <div class="recommendation-section">
                <h2 class="recommendation-title">
                    <i class="fas fa-lightbulb"></i>
                    Recommendations
                </h2>
                <p id="recommendation" class="recommendation-text">
                    <!-- Recommendation will be populated here -->
                </p>
            </div>
        </div>
    </main>

    <script>
        // Theme Toggle
        function initTheme() {
            const themeToggle = document.getElementById("themeToggle");
            const htmlElement = document.documentElement;

            const savedTheme = localStorage.getItem("theme");
            if (savedTheme === "dark") {
                document.body.classList.add("dark");
            } else {
                document.body.classList.remove("dark");
            }

            themeToggle.addEventListener("click", () => {
                if (document.body.classList.contains("dark")) {
                    document.body.classList.remove("dark");
                    localStorage.setItem("theme", "light");
                } else {
                    document.body.classList.add("dark");
                    localStorage.setItem("theme", "dark");
                }
            });
        }

        // Back Button
        document.getElementById("backBtn").addEventListener("click", () => {
            window.location.href = "index.html";
        });

        // Fetch and Display Data
        let testData = null;

        async function loadData() {
            try {
                const response = await fetch("./pr.data.json");
                testData = await response.json();

                displaySummary(testData.testSummary, testData.summary);
                displayIssues(testData.summary.criticalIssues);
                displayTestResults(testData.testResults);
                displayRecommendation(testData.summary.recommendation);

                document.getElementById("loading").classList.add("hidden");
                document.getElementById("mainContent").classList.remove("hidden");
                document.getElementById("mainContent").classList.add("fade-in");
            } catch (error) {
                console.error("Error loading data:", error);
                document.getElementById("loading").innerHTML = `
                    <div class="loading-content">
                        <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--red-500); margin-bottom: 1rem;"></i>
                        <p style="color: var(--red-600);">Error loading test data. Please ensure pr.api.json is in the same directory.</p>
                    </div>
                `;
            }
        }

        function displaySummary(testSummary, summary) {
            document.getElementById("totalTests").textContent = testSummary.totalTests;
            document.getElementById("passedTests").textContent = summary.passedTests;
            document.getElementById("failedTests").textContent = summary.failedTests;
            document.getElementById("testDate").textContent = testSummary.testDate;
        }

        function displayIssues(issues) {
            const issuesList = document.getElementById("issuesList");
            issuesList.innerHTML = "";

            issues.forEach((issue) => {
                const issueDiv = document.createElement("div");
                issueDiv.className = "issue-item";
                issueDiv.innerHTML = `
                    <i class="fas fa-circle-dot"></i>
                    <span class="issue-text">${issue}</span>
                `;
                issuesList.appendChild(issueDiv);
            });
        }

        function displayTestResults(testResults) {
            const testResultsList = document.getElementById("testResultsList");
            testResultsList.innerHTML = "";

            testResults.forEach((test, index) => {
                const statusClass = test.overallResult === "PASSED" ? "status-passed" : "status-failed";
                const statusIcon = test.overallResult === "PASSED" ? "fa-check-circle" : "fa-times-circle";

                const testCard = document.createElement("div");
                testCard.className = "test-card";
                testCard.innerHTML = `
                    <div class="test-card-header">
                        <div class="test-header-left">
                            <div class="test-name-row">
                                <h3 class="test-page-name">${test.pageName}</h3>
                                <span class="status-pill ${statusClass}">
                                    <i class="fas ${statusIcon}"></i>
                                    ${test.overallResult}
                                </span>
                            </div>
                            <p class="test-file-name">${test.fileName}</p>
                        </div>
                        <button class="expand-btn toggle-expand" data-index="${index}">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>

                    <div class="test-metrics-grid">
                        <div class="metric-item blue">
                            <p>Avg Response</p>
                            <p>${test.performanceMetrics.avgResponseTime}</p>
                        </div>
                        <div class="metric-item green">
                            <p>Requests</p>
                            <p>${test.testConfiguration.totalRequests}</p>
                        </div>
                        <div class="metric-item red">
                            <p>Errors</p>
                            <p>${test.errors.total}</p>
                        </div>
                        <div class="metric-item yellow">
                            <p>RPS</p>
                            <p>${test.performanceMetrics.requestsPerSecond}</p>
                        </div>
                    </div>

                    <div class="hidden expand-details">
                        <div class="details-grid">
                            <div class="details-section">
                                <p>Endpoints</p>
                                <div class="endpoints-list">
                                    ${test.endpoints.map(ep => `
                                        <div class="endpoint-item">
                                            <span class="endpoint-name">${ep.apiName}</span>
                                            <span class="endpoint-method">${ep.method}</span>
                                        </div>
                                    `).join("")}
                                </div>
                            </div>
                            <div class="details-section">
                                <p>Configuration</p>
                                <div class="config-list">
                                    <div class="config-item">
                                        <span>Duration:</span>
                                        <span class="config-value">${test.testConfiguration.duration}</span>
                                    </div>
                                    <div class="config-item">
                                        <span>Max VUs:</span>
                                        <span class="config-value">${test.testConfiguration.maxVUs}</span>
                                    </div>
                                    <div class="config-item">
                                        <span>Iterations:</span>
                                        <span class="config-value">${test.testConfiguration.totalIterations}</span>
                                    </div>
                                    <div class="config-item">
                                        <span>Actual Duration:</span>
                                        <span class="config-value">${test.testConfiguration.actualDuration}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="test-results-box">
                            <p>Test Results</p>
                            <div class="results-items">
                                ${test.testResults && Object.entries(test.testResults).map(([key, value]) => {
                                    if (typeof value === "object" && value.status) {
                                        return `
                                            <div>
                                                <div class="result-item-header">
                                                    <span class="result-item-name">${value.name}</span>
                                                    <span class="result-item-rate">${value.passRate}</span>
                                                </div>
                                                <div class="progress-bar">
                                                    <div class="progress-fill" style="width: ${value.passRate}"></div>
                                                </div>
                                            </div>
                                        `;
                                    }
                                    return "";
                                }).join("")}
                            </div>
                        </div>

                        ${test.issuesSummary ? `
                            <div class="issues-summary-box">
                                <p>Issues Found</p>
                                <ul class="issues-summary-list">
                                    ${test.issuesSummary.map(issue => `
                                        <li>â€¢ ${issue}</li>
                                    `).join("")}
                                </ul>
                            </div>
                        ` : ""}
                    </div>
                `;

                testResultsList.appendChild(testCard);
            });

            // Add toggle functionality
            document.querySelectorAll(".toggle-expand").forEach(btn => {
                btn.addEventListener("click", (e) => {
                    const index = e.currentTarget.dataset.index;
                    const details = document.querySelectorAll(".expand-details")[index];
                    const expandBtn = e.currentTarget;

                    details.classList.toggle("hidden");
                    expandBtn.classList.toggle("expanded");
                });
            });
        }

        function displayRecommendation(recommendation) {
            document.getElementById("recommendation").textContent = recommendation;
        }

        // Initialize
        document.addEventListener("DOMContentLoaded", () => {
            initTheme();
            loadData();
        });
    </script>
</body>

</html>